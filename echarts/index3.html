<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>柱状图</title>
</head>

<body>

    <div id="gdp" style="width: 100%;height: 900px;float: left;"></div>

    <script src="./js/echarts.js"></script>
    <script src="./js/jquery.js"></script>
    <script>
        var gdp = echarts.init(document.getElementById('gdp'));


        $.getJSON('./data/country_data.json', function (data) {

            var country = [];
            var country_data = [];
            var country_data1 = [];
            for (var index in data) {
                country.push(index);
                var gdp_avg = 0;
                var ec_avg = 0;
                data[index].forEach(element => {
                    gdp_avg += element.gdp;
                    ec_avg += element.ec;
                });
                country_data.push({
                    name: index,
                    name1: 'GDP',
                    type: 'bar',
                    color: '#003366',
                    data: [Math.round(gdp_avg / 43)]

                });
                country_data1.push({

                    name: index,
                    name1: 'EC',
                    type: 'bar',
                    data: [Math.round(ec_avg / 43)],
                    color: '#4cabce'

                })
            }

            console.log(country_data)

            option = {
                xAxis: [{
                        type: 'category',
                        boundaryGap: true
                    },
                    {
                        type: 'category',
                        boundaryGap: true,
                        data: (function () {
                            var res = [];
                            var len = 10;
                            while (len--) {
                                res.push(10 - len - 1);
                            }
                            return res;
                        })()
                    }
                ],
                yAxis: [{
                        type: 'value',
                        scale: true,
                        name: 'GDP',
                        min: 0,
                        max: 120000,
                        boundaryGap: [0.2, 0.2]
                    },
                    {
                        type: 'value',
                        scale: true,
                        name: 'EC',
                        min: 0,
                        max: 25000,
                        boundaryGap: [0.2, 0.2]
                    }
                ],
                legend: {
                    data: ['GDP', 'EC']
                },
                series: [{
                        name: 'GDP',
                        type: 'bar',
                        xAxisIndex: 1,
                        yAxisIndex: 1,
                        data: (function () {
                            var res = [];
                            var len = 10;
                            while (len--) {
                                res.push(Math.round(Math.random() * 10000));
                            }
                            return res;
                        })()
                    },
                    {
                        name: 'EC',
                        type: 'bar',
                        
                        data: (function () {
                            var res = [];
                            var len = 10;
                            while (len--) {
                                res.push(Math.round(Math.random() * 1000));
                            }
                            return res;
                        })()
                    }
                ]
            };

            gdp.setOption(option);

        });
    </script>
    </script>

</body>

</html>