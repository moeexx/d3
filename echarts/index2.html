<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>地图</title>
</head>

<body>

    <div id="container" style="height: 700px"></div>

    <script src="./js/echarts.js"></script>
    <script src="./js/echarts-gl.min.js"></script>
    <script src="./js/world.js"></script>
    <script src="./js/jquery.js"></script>
    <script>
        var myChart = echarts.init(document.getElementById('container'));

        $.getJSON('./data/year_data.json', function (data) {

            var data_yaer = [];
            data[2014].forEach(element => {
                data_yaer.push({
                    name: element.country,
                    value: element.gdp,
                    height: element.gdp / 5000 + 0.1
                });
            });
            console.log(data_yaer)

            myChart.setOption({

                visualMap: {
                    // show: false,
                    min: 0,
                    max: 100000,
                    calculable: true,
                    realtime: true,
                    inRange: {
                        color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8',
                            '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027',
                            '#a50026'
                        ]
                    }
                },

                series: [{
                    type: 'map3D',
                    map: 'world',
                    light: {
                        main: {
                            intensity: 2,
                            shadow: true,
                            shadowQuality: 'high',
                            alpha: 30
                        },
                        ambient: {
                            intensity: 0
                        },
                        ambientCubemap: {
                            texture: './data/canyon.hdr',
                            exposure: 1,
                            diffuseIntensity: 0.5
                        }
                    },
                    viewControl: {
                        distance: 70,
                        panMouseButton: 'left',
                        rotateMouseButton: 'right'
                    },
                    groundPlane: {
                        show: true,
                        color: '#999'
                    },
                    postEffect: {
                        enable: true,
                        bloom: {
                            enable: false
                        },
                        SSAO: {
                            radius: 1,
                            intensity: 1,
                            enable: true
                        },
                        depthOfField: {
                            enable: false,
                            focalRange: 10,
                            blurRadius: 10,
                            fstop: 1
                        }
                    },
                    temporalSuperSampling: {
                        enable: true
                    },
                    itemStyle: {
                        borderWidth: 1,
                        borderColor: '#000'
                    },
                    regionHeight: 0.1,
                    data: data_yaer
                }]
            });
        });
    </script>

</body>

</html>