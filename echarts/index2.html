<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>折线和柱状图</title>
</head>

<body>

    <div id="gdp" style="width: 100%;height: 900px;float: left;"></div>
    <!-- <div id="ec" style="width: 100%;height: 700px;float: left;"></div> -->

    <script src="./js/echarts.js"></script>
    <script src="./js/jquery.js"></script>
    <script>
        var gdp = echarts.init(document.getElementById('gdp'));
        // var ec = echarts.init(document.getElementById('ec'));

        $.getJSON('./data/country_data.json', function (data) {

            var country = [];
            var country_data = [];
            for (var index in data) {
                country.push(index);
                var gdp_year = [];
                var ec_year = [];
                data[index].forEach(element => {
                    gdp_year.push(element.gdp);
                    ec_year.push(element.ec);
                });
                country_data.push({
                    name: index,
                    type: 'line',
                    showSymbol: false,
                    data: gdp_year,
                    xAxisIndex: 1,
                    yAxisIndex: 1
                }, {
                    name: index,
                    type: 'line',
                    showSymbol: false,
                    data: ec_year
                });
            }
            console.log(country_data)

            gdp_option = {
                // title: [{
                //     left: 'center',
                //     text: 'GDP折线图'
                // }, {
                //     top: '55%',
                //     left: 'center',
                //     text: 'EC折线图'
                // }],
                tooltip: {
                    trigger: 'axis'
                },
                toolbox: {
                    feature: {
                        saveAsImage: {}
                    }
                },
                xAxis: [{
                    type: 'category',
                    boundaryGap: false,
                    data: ['1971', '1972', '1973', '1974', '1975', '1976', '1977', '1978', '1979',
                        '1980', '1981', '1982', '1983', '1984', '1985', '1986', '1987', '1988',
                        '1989',
                        '1990', '1991', '1992', '1993', '1994', '1995', '1996', '1997', '1998',
                        '1999',
                        '2000', '2001', '2002', '2003', '2004', '2005', '2006', '2007', '2008',
                        '2009',
                        '2010', '2011', '2012', '2013', '2014'
                    ]
                }, {
                    type: 'category',
                    boundaryGap: false,
                    gridIndex: 1,
                    data: ['1971', '1972', '1973', '1974', '1975', '1976', '1977', '1978', '1979',
                        '1980', '1981', '1982', '1983', '1984', '1985', '1986', '1987', '1988',
                        '1989',
                        '1990', '1991', '1992', '1993', '1994', '1995', '1996', '1997', '1998',
                        '1999',
                        '2000', '2001', '2002', '2003', '2004', '2005', '2006', '2007', '2008',
                        '2009',
                        '2010', '2011', '2012', '2013', '2014'
                    ]
                }],
                yAxis: [{
                    type: 'value'
                }, {
                    gridIndex: 1,
                    type: 'value'
                }],
                grid: [{
                    top: '55%'
                }, {
                    bottom: '55%'
                }],
                legend: {
                    type: 'scroll',
                    orient: 'vertical',
                    right: 10,
                    top: 20,
                    bottom: 20,
                    data: country
                    // selected: {
                    //     'China': false
                    // }
                },
                dataZoom: [{
                    type: 'slider',
                    xAxisIndex: [0, 1],
                    realtime: true,
                    //移动端展示方式
                    handleIcon: 'M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z',
                    handleSize: '140%',
                }],
                series: country_data
            }

            gdp.setOption(gdp_option);

        });
    </script>

</body>

</html>